"use strict";(self.webpackChunkwebxr_threejs=self.webpackChunkwebxr_threejs||[]).push([[790],{790:(e,t,n)=>{n.r(t),n.d(t,{MainScreen:()=>w,default:()=>f});var o=n(75),i=n(851),s=n(579),d=n(12),r=n(418);const l=document.getElementById("renderCanvas");let c=document.getElementById("loadingDiv"),a="0%",u="";var m=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function d(e){try{l(o.next(e))}catch(e){s(e)}}function r(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,r)}l((o=o.apply(e,t||[])).next())}))};const y={models:{}};let h=["snowScene.glb"];const p=new o.lLk,g=(e,t)=>m(void 0,void 0,void 0,(function*(){return new Promise((n=>{e.load(`models/${t}`,(e=>{n(e)}))}))}));class w{constructor(){this.createScene=e=>{return t=this,n=void 0,f=function*(){const t=new o.anP(e);(new s.x).load("assets/textures/snowy_park.hdr",(e=>{const o=t.fromEquirectangular(e);n.background=o.texture,n.environment=o.texture}));const n=new o.xsS,w=new o.cPb(60,window.innerWidth/window.innerHeight,.1,100);w.position.set(0,1.6,3),n.add(new o.vmT(6316128,4210752));const f=new o.Ox3(16777215);f.position.set(1,1,1).normalize(),n.add(f),e.xr.enabled=!0;const v=new d.z(w,e.domElement);v.minDistance=2,v.maxDistance=10,v.target.set(0,2,0),v.update(),(()=>{if(c)return;c=document.createElement("div"),c.id="loadingDiv",c.style.height="100vh",c.style.width="100%",c.style.pointerEvents="none",c.style.opacity="1",c.style.backgroundColor="black",c.style.zIndex="-12",c.style.transition="opacity 1.5s ease";const e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.justifyItems="center",e.style.justifyContent="center",e.style.minHeight="100%",e.style.textAlign="center";const t=document.createElement("div"),n=document.createElement("div");n.style.color="rgba(66, 135, 245, 1)",n.style.textAlign="center";const o=document.createElement("h3");o.innerHTML="Please hang tight..",o.style.fontSize="1.125rem",o.style.lineHeight="1.5rem",o.style.fontWeight="500",n.appendChild(o);const i=document.createElement("p");i.id="loadingText",i.innerHTML="";const s=document.createElement("div");s.style.width="100%",s.style.backgroundColor="gray",s.style.borderRadius="9999px",s.style.height="0.625rem";const d=document.createElement("div");d.style.width=a,d.style.backgroundColor="blue",d.style.height="0.625rem",d.style.borderRadius="9999px",d.id="progressLevel",s.appendChild(d),n.appendChild(s),t.appendChild(n),e.appendChild(t),n.appendChild(i),c.appendChild(e),(()=>{const e=l.getBoundingClientRect(),t=window.getComputedStyle(l).position,n=document.getElementById("loadingDiv");n&&(n.style.position="fixed"===t?"fixed":"absolute",n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=e.width+"px",n.style.height=e.height+"px")})(),document.body.insertBefore(c,l)})();const x=(yield new Promise(((e,t)=>m(void 0,void 0,void 0,(function*(){p.onProgress=(e,t,n)=>{(e=>{const t=document.getElementById("progressLevel");a=e,t&&(t.style.width=a)})(`${Number(t/n*100).toFixed(0)}%`),(e=>{const t=document.getElementById("loadingText");u=e,t&&(t.innerHTML=u)})(`Loaded ${t} of ${n} files.`)},p.onError=e=>{t("There was an error loading "+e)};const n=new r.E(p).setPath("assets/");for(const e of h)try{const t=yield g(n,e);y.models[e]=t}catch(e){console.log("Error loading model: ",e),t(e)}e(y)}))))).models["snowScene.glb"];let b;n.add(x.scene);const E=yield x.parser.getDependencies("material");for(const e of E)"Snow"===e.name&&(b=e);if(b){const e=new o._12(100,100,20,20),t=new o.Kj0(e,b);t.rotation.x=-Math.PI/2,n.add(t)}(()=>{const e=document.getElementById("loadingDiv");e&&(e.style.opacity="0",e.addEventListener("transitionend",(()=>{e&&e.remove()})))})();const C=i.N.createButton(e);return document.body.appendChild(C),{scene:n,camera:w,update:()=>{}}},new((w=void 0)||(w=Promise))((function(e,o){function i(e){try{d(f.next(e))}catch(e){o(e)}}function s(e){try{d(f.throw(e))}catch(e){o(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof w?n:new w((function(e){e(n)}))).then(i,s)}d((f=f.apply(t,n||[])).next())}));var t,n,w,f}}}const f=new w}}]);
//# sourceMappingURL=790.threejsBundle.js.map